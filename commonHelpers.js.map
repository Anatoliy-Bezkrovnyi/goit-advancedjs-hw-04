{"version":3,"file":"commonHelpers.js","sources":["../src/JS/picture-search-api.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n \nconst searchPictures = async ({ query, page, per_page = 40 }) => {\n      const url = \"https://pixabay.com/api/\";\n    const API_KEY = \"44765952-609f887d044cbd21207a6a8e1\";\n  const response = await axios.get(url, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page,\n      page,\n    },\n  });\n  if (response.status !== 200) {\n    throw new Error(response.statusText);\n  }\n  return response.data;\n};\nexport { searchPictures };\n","import { searchPictures } from './JS/picture-search-api.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.css';\n\nconst refs = {\n  form: document.querySelector('#search-form'),\n  gallery: document.querySelector('.gallery'),\n  searchInput: document.querySelector('#search-input'),\n  btnSearch: document.querySelector('#btn-submit'),\n  btnLoadMore: document.querySelector('#load-more'),\n};\nconst lightbox = new SimpleLightbox(`.gallery .photo-link`, {});\nlet pageData = {\n  query: '',\n  page: 0,\n  per_page: 40,\n};\n\nconst fetchData = async () => {\n  pageData.page += 1;\n  try {\n    const data = await searchPictures({\n      query: pageData.query,\n      page: pageData.page,\n      per_page: pageData.per_page,\n    });\n    const { hits, totalHits } = data;\n    if (hits?.length === 0) {\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    }\n    if (pageData.page === 1) {\n      iziToast.success({\n        position: 'topRight',\n        message: `Hooray! We found ${totalHits} images.`,\n      });\n    }\n    const itemsMarkup = hits.map(item => galleryItemMarkup(item)).join('');\n    refs.gallery.insertAdjacentHTML('beforeend', itemsMarkup);\n    if (!(pageData.page * pageData.per_page < totalHits)) {\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      refs.btnLoadMore.classList.add('hidden');\n    } else {\n      refs.btnLoadMore.classList.remove('hidden');\n    }\n    lightbox.refresh();\n    return data;\n  } catch (err) {\n    iziToast.error({\n      position: 'topRight',\n      message: err.message,\n    });\n  }\n};\nrefs.form.addEventListener('submit', function (event) {\n  event.preventDefault();\n  const value = refs.searchInput.value.trim();\n  if (!value) {\n    iziToast.warning({\n      position: 'topRight',\n      message: `Input is empty! Please, type your query`,\n    });\n    return;\n  }\n  refs.gallery.innerHTML = '';\n  refs.btnLoadMore.classList.add('hidden');\n  pageData.page = 0;\n  pageData.query = value;\n  fetchData();\n});\nrefs.btnLoadMore.addEventListener('click', () => {\n  fetchData();\n});\nfunction galleryItemMarkup({\n  id,\n  largeImageURL: original,\n  webformatURL: thumb,\n  tags: title,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n  <div class=\"photo-card\" data-id=\"${id}\">\n    <a class=\"photo-link\" href=\"${original}\" >\n      <img src=\"${thumb}\" alt=\"${title}\" title=\"${title}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b><span class=\"value\"> ${likes}</span>\n          \n        </p>\n        <p class=\"info-item\">\n          <b>Views</b><span class=\"value\"> ${views} </span>\n          \n        </p>\n        <p class=\"info-item\">\n          <b>Comments</b><span class=\"value\"> ${comments} </span>\n          \n        </p>\n        <p class=\"info-item\">\n          <b>Downloads</b><span class=\"value\"> ${downloads} </span>\n          \n        </p>\n      </div>\n    </a>\n  </div>`;\n}"],"names":["searchPictures","query","page","per_page","url","API_KEY","response","axios","refs","lightbox","SimpleLightbox","pageData","fetchData","data","hits","totalHits","iziToast","itemsMarkup","item","galleryItemMarkup","err","event","value","id","original","thumb","title","likes","views","comments","downloads"],"mappings":"owBAGA,MAAMA,EAAiB,MAAO,CAAE,MAAAC,EAAO,KAAAC,EAAM,SAAAC,EAAW,EAAE,IAAO,CAC3D,MAAMC,EAAM,2BACRC,EAAU,qCACZC,EAAW,MAAMC,EAAM,IAAIH,EAAK,CACpC,OAAQ,CACN,IAAKC,EACL,EAAGJ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAAE,EACA,KAAAD,CACD,CACL,CAAG,EACD,GAAII,EAAS,SAAW,IACtB,MAAM,IAAI,MAAMA,EAAS,UAAU,EAErC,OAAOA,EAAS,IAClB,ECfME,EAAO,CACX,KAAM,SAAS,cAAc,cAAc,EAC3C,QAAS,SAAS,cAAc,UAAU,EAC1C,YAAa,SAAS,cAAc,eAAe,EACnD,UAAW,SAAS,cAAc,aAAa,EAC/C,YAAa,SAAS,cAAc,YAAY,CAClD,EACMC,EAAW,IAAIC,EAAe,uBAAwB,CAAE,CAAA,EAC9D,IAAIC,EAAW,CACb,MAAO,GACP,KAAM,EACN,SAAU,EACZ,EAEA,MAAMC,EAAY,SAAY,CAC5BD,EAAS,MAAQ,EACjB,GAAI,CACF,MAAME,EAAO,MAAMb,EAAe,CAChC,MAAOW,EAAS,MAChB,KAAMA,EAAS,KACf,SAAUA,EAAS,QACzB,CAAK,EACK,CAAE,KAAAG,EAAM,UAAAC,CAAW,EAAGF,EAC5B,IAAIC,GAAA,YAAAA,EAAM,UAAW,EACnB,MAAM,IAAI,MACR,0EACR,EAEQH,EAAS,OAAS,GACpBK,EAAS,QAAQ,CACf,SAAU,WACV,QAAS,oBAAoBD,CAAS,UAC9C,CAAO,EAEH,MAAME,EAAcH,EAAK,IAAII,GAAQC,EAAkBD,CAAI,CAAC,EAAE,KAAK,EAAE,EACrE,OAAAV,EAAK,QAAQ,mBAAmB,YAAaS,CAAW,EAClDN,EAAS,KAAOA,EAAS,SAAWI,EAOxCP,EAAK,YAAY,UAAU,OAAO,QAAQ,GAN1CQ,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,4DACjB,CAAO,EACDR,EAAK,YAAY,UAAU,IAAI,QAAQ,GAIzCC,EAAS,QAAO,EACTI,CACR,OAAQO,EAAK,CACZJ,EAAS,MAAM,CACb,SAAU,WACV,QAASI,EAAI,OACnB,CAAK,CACF,CACH,EACAZ,EAAK,KAAK,iBAAiB,SAAU,SAAUa,EAAO,CACpDA,EAAM,eAAc,EACpB,MAAMC,EAAQd,EAAK,YAAY,MAAM,KAAI,EACzC,GAAI,CAACc,EAAO,CACVN,EAAS,QAAQ,CACf,SAAU,WACV,QAAS,yCACf,CAAK,EACD,MACD,CACDR,EAAK,QAAQ,UAAY,GACzBA,EAAK,YAAY,UAAU,IAAI,QAAQ,EACvCG,EAAS,KAAO,EAChBA,EAAS,MAAQW,EACjBV,GACF,CAAC,EACDJ,EAAK,YAAY,iBAAiB,QAAS,IAAM,CAC/CI,GACF,CAAC,EACD,SAASO,EAAkB,CACzB,GAAAI,EACA,cAAeC,EACf,aAAcC,EACd,KAAMC,EACN,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA,qCAC4BP,CAAE;AAAA,kCACLC,CAAQ;AAAA,kBACxBC,CAAK,UAAUC,CAAK,YAAYA,CAAK;AAAA;AAAA;AAAA,6CAGVC,CAAK;AAAA;AAAA;AAAA;AAAA,6CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,gDAIFC,CAAQ;AAAA;AAAA;AAAA;AAAA,iDAIPC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,SAM1D"}